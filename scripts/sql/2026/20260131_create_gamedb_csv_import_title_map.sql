CREATE TABLE RPG_CLUB_GAMEDB_IMPORT_TITLE_MAP (
  MAP_ID         NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  TITLE_RAW      VARCHAR2(500) NOT NULL,
  TITLE_NORM     VARCHAR2(500) NOT NULL,
  GAMEDB_GAME_ID NUMBER,
  STATUS         VARCHAR2(20) NOT NULL,
  CREATED_BY     VARCHAR2(30),
  CREATED_AT     TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP NOT NULL,
  UPDATED_AT     TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE UNIQUE INDEX UX_GAMEDB_IMPORT_TITLE_NORM
  ON RPG_CLUB_GAMEDB_IMPORT_TITLE_MAP (TITLE_NORM);

CREATE INDEX IX_GAMEDB_IMPORT_TITLE_STATUS
  ON RPG_CLUB_GAMEDB_IMPORT_TITLE_MAP (STATUS);

CREATE OR REPLACE TRIGGER TRG_GAMEDB_IMPORT_TITLE_MAP_UPD
BEFORE UPDATE ON RPG_CLUB_GAMEDB_IMPORT_TITLE_MAP
FOR EACH ROW
BEGIN
  :NEW.UPDATED_AT := SYSTIMESTAMP;
END;
/

COMMIT;
