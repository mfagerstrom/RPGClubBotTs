-- Track games users have marked as "Now Playing"

CREATE TABLE USER_NOW_PLAYING (
  ENTRY_ID   NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  USER_ID    VARCHAR2(30) NOT NULL,
  TITLE      VARCHAR2(200) NOT NULL,
  ADDED_AT   TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP NOT NULL
);

ALTER TABLE USER_NOW_PLAYING
  ADD CONSTRAINT UQ_USER_NOW_PLAYING UNIQUE (USER_ID, TITLE);

CREATE INDEX IX_USER_NOW_PLAYING_USER ON USER_NOW_PLAYING (USER_ID);

COMMIT;
